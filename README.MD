# ğŸš— FIAP Service - Vehicles

MicroserviÃ§o de **cadastro e gestÃ£o de veÃ­culos** desenvolvido em **Python + FastAPI**, utilizando **Arquitetura Hexagonal (Ports & Adapters)** e **PostgreSQL** para persistÃªncia.

---

## ğŸ›ï¸ Arquitetura

A aplicaÃ§Ã£o segue princÃ­pios de **Arquitetura Hexagonal**, tambÃ©m conhecida como **Ports & Adapters**:

- **Domain (`src/domain`)**  
  Entidades e regras de negÃ³cio puras (`Vehicle`, `VehicleStatus`).

- **Ports (`src/ports`)**  
  Contratos/Protocolos de comunicaÃ§Ã£o (ex.: `VehicleRepository`).

- **Application (`src/application`)**  
  Casos de uso que orquestram a lÃ³gica de negÃ³cio (`create_vehicle`).

- **Adapters (`src/adapters`)**  
  - **db/** â†’ Implementa persistÃªncia usando **SQLAlchemy** e **PostgreSQL**.  
  - **http/** â†’ ExposiÃ§Ã£o da API via **FastAPI** (endpoints REST).

- **main.py**  
  Ponto de entrada da aplicaÃ§Ã£o, inicializa o FastAPI e conecta os routers.

ğŸ“ **Vantagens dessa abordagem**:
- IndependÃªncia do banco de dados.
- Facilidade para adicionar novas interfaces (ex.: CLI, gRPC).
- SeparaÃ§Ã£o clara entre **regra de negÃ³cio** e **infraestrutura**.

---

## ğŸ›¢ï¸ Banco de Dados

O serviÃ§o utiliza **PostgreSQL 15** pelas seguintes razÃµes:

- **Confiabilidade e maturidade** em ambientes crÃ­ticos.  
- **Suporte robusto a transaÃ§Ãµes**.  
- IntegraÃ§Ã£o sÃ³lida com **SQLAlchemy** e **Alembic** (migraÃ§Ãµes).  

### ğŸ”„ MigraÃ§Ãµes
As migraÃ§Ãµes sÃ£o gerenciadas com **Alembic**:

```bash
# Criar nova migration
alembic revision --autogenerate -m "descriÃ§Ã£o"

# Aplicar migrations
alembic upgrade head
```

---

## ğŸ³ Executando o Projeto

1. **Subir containers com Docker Compose**:
   ```bash
   docker compose up -d --build
   ```

2. **Acessar a API**:  
   - API: [http://localhost:8000](http://localhost:8000)  
   - DocumentaÃ§Ã£o Swagger: [http://localhost:8000/docs](http://localhost:8000/docs)  
   - Banco PostgreSQL: `localhost:5432`  

3. **Encerrar serviÃ§os**:
   ```bash
   docker compose down
   ```

---

## ğŸ“¡ Endpoints da API

### ğŸ” Healthcheck
- `GET /healthz` â†’ Verifica se a API estÃ¡ rodando.  
- `GET /readyz` â†’ Testa conectividade com o banco.

### ğŸš˜ Vehicles

#### Criar veÃ­culo
`POST /vehicles`

**Request Body**:
```json
{
  "brand": "Toyota",
  "model": "Corolla",
  "year": 2020,
  "color": "Prata",
  "price": 85000.00
}
```

**Response**:
```json
{
  "id": "uuid-gerado",
  "brand": "Toyota",
  "model": "Corolla",
  "year": 2020,
  "color": "Prata",
  "price": 85000.0,
  "status": "available"
}
```

#### Listar veÃ­culos
`GET /vehicles?status={status}`

ParÃ¢metro `status` pode ser:
- `available`
- `reserved`
- `sold`

**Exemplo**:
```http
GET http://localhost:8000/vehicles?status=available
```

---

